# Feature Specification: 优化首页标题栏导航

**Feature Branch**: `005-optimize-header-nav`  
**Created**: 2025-10-31  
**Status**: Draft  
**Input**: User description: "优化首页标题栏，给每个菜单项加一个时尚的图标，另外增加一个登录和用户注册的入口"

## Clarifications

### Session 2025-10-31

- Q: 登录/注册按钮的交互模式（跳转页面 vs 弹出表单）？ → A: 点击后在当前页面弹出模态框，显示登录/注册表单（无页面跳转）
- Q: 用户名截断的字符数限制？ → A: 12个字符
- Q: 移动端导航菜单方案（汉堡菜单 vs 折叠菜单 vs 底部标签栏）？ → A: 汉堡菜单：点击三横线图标展开全屏或侧边菜单，包含所有导航项
- Q: 汉堡菜单在页面滚动或屏幕旋转时的行为？ → A: 自动关闭：页面滚动或屏幕旋转时自动关闭汉堡菜单

## User Scenarios & Testing *(mandatory)*

### User Story 1 - 访客快速理解导航功能 (Priority: P1)

访客打开首页时，能够通过导航栏的图标和文字快速识别各个功能入口，无需猜测或尝试点击。

**Why this priority**: 这是最核心的用户体验改进，直接影响所有访客对网站的第一印象和导航效率。图标作为视觉引导，能显著降低用户的认知负担。

**Independent Test**: 可以独立测试 - 新用户访问首页，记录他们找到特定功能（如"市场行情"或"板块"）所需的时间，对比优化前后的效率提升。

**Acceptance Scenarios**:

1. **Given** 访客首次打开首页，**When** 查看导航栏，**Then** 每个菜单项都显示一个与功能相关的图标和文字标签
2. **Given** 访客查看导航栏，**When** 鼠标悬停在菜单项上，**Then** 图标和文字都有视觉反馈（如颜色变化、动画效果）
3. **Given** 访客在桌面设备上浏览，**When** 查看导航栏，**Then** 所有导航项横向排列显示
4. **Given** 访客在移动设备上浏览，**When** 查看导航栏，**Then** 导航项被汉堡菜单图标替代，登录/注册按钮仍然可见
5. **Given** 访客在移动设备上点击汉堡菜单，**When** 菜单展开，**Then** 显示所有导航项和图标

---

### User Story 2 - 未登录用户注册和登录 (Priority: P1)

未登录的访客能够在首页导航栏中快速找到并点击"登录"或"注册"入口，开始使用平台的交易功能。

**Why this priority**: 用户转化的关键路径。没有明显的登录/注册入口会直接导致用户流失，无法使用平台的核心功能（模拟交易）。

**Independent Test**: 可以独立测试 - 新访客访问首页，测量从打开页面到找到并点击注册按钮所需的时间，以及注册转化率。

**Acceptance Scenarios**:

1. **Given** 未登录的访客查看首页，**When** 查看导航栏右侧，**Then** 看到醒目的"登录"和"注册"按钮
2. **Given** 访客点击"注册"按钮，**When** 按钮响应，**Then** 在当前页面弹出模态框显示注册表单（不跳转页面）
3. **Given** 访客点击"登录"按钮，**When** 按钮响应，**Then** 在当前页面弹出模态框显示登录表单（不跳转页面）
4. **Given** 访客在模态框中完成登录/注册，**When** 操作成功，**Then** 模态框关闭，导航栏更新为已登录状态
5. **Given** 访客在移动设备上浏览，**When** 查看导航栏，**Then** 登录和注册按钮在移动端也清晰可见且易于点击

---

### User Story 3 - 已登录用户看到个人入口 (Priority: P2)

已登录的用户在导航栏看到自己的用户信息或头像，可以快速访问个人中心、账户设置等功能。

**Why this priority**: 提升已登录用户的体验，但不是新用户转化的必要条件，可以在P1功能完成后实现。

**Independent Test**: 可以独立测试 - 用户登录后，检查导航栏是否显示用户信息，点击后是否能访问个人功能菜单。

**Acceptance Scenarios**:

1. **Given** 用户已登录，**When** 查看导航栏右侧，**Then** 看到用户头像或用户名显示
2. **Given** 用户点击头像或用户名，**When** 下拉菜单展开，**Then** 显示个人中心、账户设置、退出登录等选项
3. **Given** 用户选择"退出登录"，**When** 点击后，**Then** 用户退出登录，导航栏恢复到显示"登录"和"注册"按钮的状态

---

### Edge Cases

- 当导航栏菜单项数量增加时，桌面端水平滚动或换行；移动端统一收入汉堡菜单
- 当用户名超过12个字符时，显示前12个字符+"..."，完整用户名在悬停时通过tooltip显示
- 当汉堡菜单展开时，页面滚动或屏幕旋转自动关闭菜单
- 当网络加载慢时，图标是否有占位符或加载状态？
- 当用户未设置头像时，显示什么默认头像？
- 深色模式下图标和按钮的显示效果？

## Requirements *(mandatory)*

### Functional Requirements

#### 导航菜单图标 (P1)

- **FR-001**: 系统必须为每个现有导航菜单项添加一个与功能语义匹配的图标
- **FR-002**: 图标必须在菜单文字的左侧显示，保持统一的间距和对齐
- **FR-003**: 图标样式必须与网站整体设计风格一致（当前为柔和的渐变色系）
- **FR-004**: 鼠标悬停在菜单项上时，图标和文字必须同时产生视觉反馈（颜色变化、动画效果）

#### 登录/注册入口 (P1)

- **FR-005**: 系统必须在导航栏右侧添加"登录"和"注册"两个按钮
- **FR-006**: "注册"按钮必须使用主色调（蓝色）作为背景色，突出显示
- **FR-007**: "登录"按钮必须使用次要样式（白色背景或边框按钮）
- **FR-008**: 点击"登录"按钮必须在当前页面弹出模态框显示登录表单
- **FR-009**: 点击"注册"按钮必须在当前页面弹出模态框显示注册表单
- **FR-010**: 登录和注册按钮在未登录状态下必须始终可见
- **FR-010a**: 登录/注册模态框必须支持通过点击遮罩层或关闭按钮来关闭
- **FR-010b**: 用户成功登录或注册后，模态框必须自动关闭，导航栏必须立即更新为已登录状态

#### 已登录用户状态 (P2)

- **FR-011**: 当用户已登录时，导航栏右侧必须显示用户头像或用户名，替代登录/注册按钮
- **FR-012**: 点击用户头像或用户名必须显示下拉菜单，包含个人中心、账户设置、退出登录等选项
- **FR-013**: 用户头像必须支持自定义上传，未上传时显示默认头像
- **FR-014**: 用户名显示长度超过12个字符时必须截断并显示省略号（例如：显示前12个字符+"..."）

#### 响应式设计

- **FR-015**: 导航栏在移动设备（屏幕宽度 < 768px）上必须显示汉堡菜单图标（三横线）替代导航项
- **FR-015a**: 点击汉堡菜单图标必须展开全屏或侧边菜单，显示所有导航项和图标
- **FR-015b**: 汉堡菜单展开时必须支持点击遮罩层或关闭按钮来收起菜单
- **FR-015c**: 汉堡菜单展开时，页面滚动或屏幕方向旋转必须自动关闭菜单
- **FR-016**: 图标在移动设备上必须保持清晰可见且易于点击（触摸目标至少 44x44px）
- **FR-017**: 登录/注册按钮在移动设备上必须始终显示在导航栏右侧（不被汉堡菜单收起）

### Key Entities

- **导航菜单项（Navigation Item）**: 包含图标、文字标签、链接地址、显示顺序等属性
- **用户会话（User Session）**: 记录用户登录状态、用户ID、用户名、头像URL等信息
- **用户配置（User Profile）**: 包含用户名、头像、偏好设置等个人信息

## Success Criteria *(mandatory)*

### Measurable Outcomes

- **SC-001**: 新用户找到特定导航功能（如"市场行情"）的平均时间减少 30% 以上
- **SC-002**: 首页访客的注册转化率提升 20% 以上（相比优化前）
- **SC-003**: 95% 的用户能在 3 秒内识别并点击登录或注册入口
- **SC-004**: 导航栏在所有主流浏览器和设备上的可用性评分达到 90 分以上（基于可用性测试）
- **SC-005**: 移动设备用户的导航操作成功率达到 95% 以上
- **SC-006**: 用户对新导航栏设计的满意度评分达到 4.5/5 以上

## Assumptions

1. **图标库选择**: 假设使用 Lucide React 图标库（项目已引入），符合现有技术栈
2. **认证系统**: 假设登录/注册功能的后端API已经存在或将同步开发
3. **用户状态管理**: 假设使用前端状态管理（如 Zustand）来管理用户登录状态
4. **默认头像**: 假设使用首字母圆形头像或通用用户图标作为默认头像
5. **移动端断点**: 假设移动端断点为 768px，与现有响应式设计保持一致

## Out of Scope

- 登录和注册页面的详细设计和实现（这是另一个功能）
- 忘记密码、邮箱验证等认证流程细节
- 用户个人中心页面的完整功能
- 多语言支持（如果需要，将作为独立功能）
- 第三方登录（OAuth、社交账号登录等）
