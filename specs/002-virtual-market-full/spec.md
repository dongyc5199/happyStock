# Feature Specification: A股虚拟市场完整实现

**Feature Branch**: `002-virtual-market-full`
**Created**: 2025-10-28
**Status**: Draft
**Input**: User description: "完整的虚拟市场实现（包含所有4个阶段）"

## User Scenarios & Testing *(mandatory)*

### User Story 1 - 查看真实感的股票市场数据 (Priority: P1)

作为投资学习者，我希望看到一个包含100+只股票的完整虚拟市场，这些股票具有真实的A股特征（6位代码、真实的价格范围、市值分布），以便我能在接近真实的环境中学习投资。

**Why this priority**: 这是整个虚拟市场的基础，没有股票数据就无法进行任何交易或学习。用户需要看到一个"看起来真实"的市场才会产生信任感。

**Independent Test**: 可以通过访问股票列表页面，查看至少100只股票的基本信息（代码、名称、价格、涨跌幅、所属板块）来独立测试。即使没有交易功能，用户也能浏览和了解市场结构。

**Acceptance Scenarios**:

1. **Given** 用户打开股票市场页面，**When** 页面加载完成，**Then** 显示至少100只虚拟股票，每只股票都有6位数字代码（如600001、300750等）
2. **Given** 用户浏览股票列表，**When** 查看股票详情，**Then** 每只股票显示当前价格、涨跌幅、成交量、市值、所属板块等基本信息
3. **Given** 用户查看不同板块的股票，**When** 切换板块筛选，**Then** 看到金融、科技、消费、新能源等10大板块的股票分类
4. **Given** 用户查看股票的K线图，**When** 选择时间范围，**Then** 显示至少90天的历史K线数据（开盘、收盘、最高、最低价格）

---

### User Story 2 - 理解市场整体走势通过指数 (Priority: P1)

作为投资学习者，我希望看到类似沪深300、上证50的市场指数，这些指数能反映整体市场或特定板块的走势，以便我理解"大盘"的概念和个股与大盘的关系。

**Why this priority**: 指数是理解市场的关键工具。用户需要通过指数来判断市场整体状况，这是投资决策的重要依据。没有指数，用户无法理解市场联动性。

**Independent Test**: 可以通过访问指数看板，查看HAPPY300、HAPPY50、GROW100三大指数的实时点位、涨跌幅和K线图来独立测试。用户能看到指数数据即完成基本价值交付。

**Acceptance Scenarios**:

1. **Given** 用户打开首页或指数看板，**When** 页面加载，**Then** 显示HAPPY300（快乐综合指数）、HAPPY50（快乐50指数）、GROW100（创新成长指数）三大核心指数的当前点位
2. **Given** 用户查看指数详情，**When** 点击某个指数，**Then** 显示该指数的涨跌点数、涨跌幅百分比、成交量、成交额等信息
3. **Given** 用户想了解指数构成，**When** 查看指数成分股，**Then** 显示该指数包含哪些股票及其权重（如平安保险权重8.5%）
4. **Given** 用户查看指数历史走势，**When** 打开指数K线图，**Then** 显示至少90天的指数点位变化趋势
5. **Given** 用户查看板块表现，**When** 打开板块热力图，**Then** 显示10大板块（科技、金融、消费等）的当日涨跌幅，用颜色区分涨跌

---

### User Story 3 - 观察市场联动效果 (Priority: P2)

作为投资学习者，我希望当"大盘"上涨时，大部分股票也跟着上涨（且不同板块涨幅不同），以便我学习市场联动性、板块轮动、Beta系数等投资概念。

**Why this priority**: 这是虚拟市场"真实感"的核心。真实市场中股票不是独立波动的，而是受大盘和板块影响。这个功能让用户理解系统性风险和板块特征。

**Independent Test**: 可以通过观察某一时刻大盘上涨1%时，查看不同板块和个股的表现（科技股涨1.3%、金融股涨0.7%、公用事业涨0.5%）来验证联动机制是否生效。

**Acceptance Scenarios**:

1. **Given** HAPPY300指数上涨1%，**When** 用户查看各板块表现，**Then** 科技板块涨幅约1.2-1.4%，金融板块涨幅约0.7-0.8%，公用事业板块涨幅约0.5-0.6%
2. **Given** HAPPY300指数下跌1%，**When** 用户查看高Beta股票（如新能源股），**Then** 这些股票下跌幅度大于1%（如1.5-2%）
3. **Given** 科技板块整体上涨，**When** 用户查看该板块内的个股，**Then** 大部分科技股（70%+）也呈现上涨趋势
4. **Given** 用户查看股票详情页，**When** 查看Beta系数说明，**Then** 显示该股票的Beta值（如1.35）及其含义（"该股票比大盘波动大35%"）
5. **Given** 市场处于横盘状态，**When** 用户观察一段时间，**Then** 指数和个股波动较小，多数股票涨跌幅在±0.5%以内

---

### User Story 4 - 获取实时更新的市场数据 (Priority: P2)

作为投资学习者，我希望市场数据能够自动更新（模拟真实市场的实时性），每分钟或每几分钟价格有变化，以便我体验真实的市场交易环境和培养看盘习惯。

**Why this priority**: 实时性是金融市场的核心特征。静态数据无法模拟真实交易中的紧迫感和决策压力。这个功能让用户体验"活的"市场。

**Independent Test**: 可以通过打开股票列表或指数看板，等待1-2分钟后观察数据是否自动刷新（价格、涨跌幅变化）来验证。

**Acceptance Scenarios**:

1. **Given** 用户打开股票列表页面，**When** 等待1分钟，**Then** 页面自动刷新，至少部分股票的价格和涨跌幅发生变化
2. **Given** 用户查看指数看板，**When** 等待1分钟，**Then** 三大指数的点位和涨跌幅自动更新
3. **Given** 用户查看某只股票的实时K线图，**When** 新的分钟数据生成，**Then** K线图自动添加新的数据点
4. **Given** 用户在股票详情页，**When** 价格更新，**Then** 页面上的当前价、涨跌额、涨跌幅同步更新，无需手动刷新
5. **Given** 系统检测到用户长时间未活动，**When** 超过5分钟无操作，**Then** 暂停自动刷新以节省资源，用户重新操作时恢复

---

### User Story 5 - 了解个股所属板块和市场地位 (Priority: P3)

作为投资学习者，我希望查看每只股票的详细元数据（所属板块、市值大小、Beta系数、是否为指数成分股等），以便我学习如何分析和分类股票。

**Why this priority**: 这是进阶学习功能。帮助用户理解股票分类、风险评估、指数构成等专业知识。不影响基本浏览，但对深度学习很重要。

**Independent Test**: 可以通过点击任意股票进入详情页，查看其板块归属、市值等级、Beta系数、在HAPPY300中的权重等信息来验证。

**Acceptance Scenarios**:

1. **Given** 用户打开某只股票详情页，**When** 查看基本信息区域，**Then** 显示该股票所属板块（如"科技板块"）、市值等级（如"大盘股"）、Beta系数（如"1.25"）
2. **Given** 用户查看一只权重股（如平安保险），**When** 查看指数信息，**Then** 显示"HAPPY300成分股，权重8.5%"
3. **Given** 用户查看一只小盘股，**When** 查看指数信息，**Then** 显示"非HAPPY300成分股"或"HAPPY300成分股，权重0.2%"
4. **Given** 用户想了解Beta含义，**When** 点击Beta系数旁的帮助图标，**Then** 显示解释："Beta>1表示比大盘波动大，Beta<1表示比大盘波动小"
5. **Given** 用户查看板块页面，**When** 选择某个板块，**Then** 显示该板块的所有股票、板块平均Beta、板块总市值等统计信息

---

### User Story 6 - 通过历史数据学习K线分析 (Priority: P3)

作为投资学习者，我希望能查看任意股票或指数的历史K线数据（至少90天），支持不同时间周期切换（日K、周K），以便我学习技术分析和图表阅读。

**Why this priority**: K线图是技术分析的基础工具。历史数据让用户可以回测策略、学习形态识别。这是教育平台的重要功能，但不影响实时数据浏览。

**Independent Test**: 可以通过打开任意股票的K线图，切换时间周期（日K、周K、月K），查看是否正确显示历史数据来验证。

**Acceptance Scenarios**:

1. **Given** 用户打开股票K线图，**When** 默认加载，**Then** 显示最近90天的日K线数据（每天一根K线，包含开盘、收盘、最高、最低价）
2. **Given** 用户查看K线图，**When** 切换到周K线，**Then** 显示最近13周的周K线数据（每周一根K线）
3. **Given** 用户查看K线图，**When** 放大或缩小时间范围，**Then** K线图相应调整显示的数据量
4. **Given** 用户查看K线图，**When** 鼠标悬停在某根K线上，**Then** 显示该时间点的详细信息（日期、开盘价、收盘价、最高价、最低价、涨跌幅）
5. **Given** 用户查看指数K线图，**When** 打开HAPPY300的K线图，**Then** 显示指数点位的历史走势，数据范围与个股相同

---

### Edge Cases

- **市场开盘与闭盘时间**：虽然是模拟市场，但如何处理"非交易时间"？是24小时生成数据还是模拟A股交易时间（9:30-15:00）？默认采用24小时连续数据生成，用户可以随时查看和学习。
- **极端价格波动**：当某只股票因算法原因出现异常波动（如单日涨跌超过20%），系统如何处理？设置涨跌停限制（±10%）模拟真实A股规则。
- **指数计算异常**：如果成分股数据缺失或价格为零，指数如何计算？跳过异常股票，使用剩余正常股票计算指数，并记录日志。
- **数据刷新失败**：如果价格生成服务出现故障，前端如何处理？显示上一次成功获取的数据，并在页面顶部显示"数据更新延迟"提示。
- **新用户首次访问**：如果用户首次访问时系统刚初始化，历史数据不足90天怎么办？系统在部署时预生成完整的90天历史数据。
- **板块轮动极端情况**：如果某个板块所有股票都下跌，是否违背"大盘涨则板块涨"的规则？不违背，因为联动是概率性的（70-80%股票跟随），允许个别板块或股票逆势。
- **权重股对指数的影响**：如果某只10%权重的股票涨停，会导致指数大幅上涨吗？是的，这是市值加权指数的特性，系统应正确反映这种影响。
- **用户时区问题**：全球用户查看数据时，时间戳如何显示？统一使用UTC时间存储，前端根据用户时区显示本地时间。

## Requirements *(mandatory)*

### Functional Requirements

#### Phase 1: 基础数据与股票系统

- **FR-001**: 系统必须维护至少100只虚拟股票的完整数据，包括股票代码（6位数字）、名称、当前价格、开盘价、最高价、最低价、成交量、成交额、涨跌额、涨跌幅
- **FR-002**: 系统必须将100+只股票分类到10个行业板块（科技、金融、消费、新能源、医药、工业、地产、能源、材料、公用事业），每个板块至少包含5只股票
- **FR-003**: 系统必须为每只股票分配市值等级（超大盘、大盘、中盘、小盘、微盘），市值范围从50亿到2万亿元，分布合理
- **FR-004**: 系统必须为每只股票配置Beta系数（范围0.65到1.80），反映该股票相对大盘的波动性
- **FR-005**: 系统必须为每只股票生成至少90天的历史K线数据，每天包含开盘、收盘、最高、最低价格及成交量
- **FR-006**: 系统必须持续生成新的价格数据，更新频率为每分钟一次，模拟实时市场
- **FR-007**: 股票代码必须遵循真实A股规则（600xxx代表上海主板、300xxx代表创业板、688xxx代表科创板、000xxx/002xxx代表深圳市场）

#### Phase 2: 指数计算系统

- **FR-008**: 系统必须计算并维护HAPPY300指数（快乐综合指数），基点3000，包含市值最大的100只股票
- **FR-009**: 系统必须计算并维护HAPPY50指数（快乐50指数），基点2500，包含HAPPY300中市值最大的50只股票
- **FR-010**: 系统必须计算并维护GROW100指数（创新成长指数），基点2000，包含科技、新能源等成长行业的50只股票
- **FR-011**: 指数计算必须采用自由流通市值加权方法，单只股票权重上限为10%，前5大股票合计权重上限为40%
- **FR-012**: 系统必须为每个指数维护成分股列表及其权重，权重每季度调整一次（模拟真实指数调仓）
- **FR-013**: 系统必须记录每个指数的历史点位数据（至少90天），包括开盘点位、收盘点位、最高点位、最低点位、涨跌点数、涨跌幅
- **FR-014**: 系统必须计算10个行业指数（对应10大板块），每个行业指数反映该板块股票的整体表现
- **FR-015**: 指数数据更新频率必须与个股相同（每分钟一次），确保指数与成分股价格同步

#### Phase 3: 市场联动机制

- **FR-016**: 系统必须实现三层价格生成机制：全市场状态 → 板块联动 → 个股波动
- **FR-017**: 个股价格变化必须由三部分组成：市场影响（30%）+ 板块影响（30%）+ 个股自身波动（40%）
- **FR-018**: 系统必须维护全局市场状态（牛市、熊市、横盘震荡），影响所有股票和指数的整体走势
- **FR-019**: 每个板块必须有独立的板块Beta系数（如科技1.25、金融0.75、公用事业0.65），决定板块对大盘变化的响应程度
- **FR-020**: 当HAPPY300指数上涨时，至少70%的个股必须跟随上涨，且高Beta股票涨幅大于低Beta股票
- **FR-021**: 系统必须模拟板块轮动效果，即不同板块在不同时期表现不同（如某周期科技领涨、某周期金融防守）
- **FR-022**: 系统必须为股票设置涨跌停限制（单日最大涨跌幅±10%），模拟A股交易规则
- **FR-023**: 市场状态切换（牛市↔熊市↔横盘）必须是渐进的，不能突然剧变，切换周期至少7天

#### Phase 4: 前端展示与用户体验

- **FR-024**: 系统必须提供股票列表页面，显示所有股票的实时价格、涨跌幅、成交量等核心信息，支持按板块筛选
- **FR-025**: 系统必须提供指数看板页面，同时显示HAPPY300、HAPPY50、GROW100三大指数的实时点位和涨跌幅
- **FR-026**: 系统必须提供板块热力图，用颜色深浅表示10大板块的涨跌幅，一眼看出市场热点
- **FR-027**: 系统必须提供股票详情页，显示单只股票的完整信息：基本信息、实时价格、K线图、所属板块、Beta系数、指数权重等
- **FR-028**: 系统必须提供K线图组件，支持显示个股和指数的历史价格走势，支持日K、周K、月K切换
- **FR-029**: 系统必须提供指数详情页，显示指数的成分股列表、权重分布、历史走势图
- **FR-030**: 前端数据必须支持自动刷新，无需用户手动刷新页面即可看到最新价格
- **FR-031**: 系统必须在股票详情页显示该股票的Beta系数，并提供通俗易懂的解释（如"该股票比大盘波动大25%"）
- **FR-032**: 系统必须提供搜索功能，用户可以通过股票代码或名称快速查找股票
- **FR-033**: K线图必须支持鼠标悬停显示详细信息（日期、开盘、收盘、最高、最低、涨跌幅）
- **FR-034**: 页面加载时间必须在3秒以内，数据刷新必须在1秒内完成，确保流畅体验

### Key Entities

- **Stock（股票）**：代表一只虚拟股票，包含代码、名称、当前价格、市值、所属板块、Beta系数、是否为指数成分股、流通股本等属性。关键关系：属于某个板块，可能是某个或多个指数的成分股。

- **Sector（板块）**：代表一个行业板块，包含板块代码、板块名称、板块Beta系数、包含的股票列表、板块总市值。关键关系：包含多只股票，有对应的行业指数。

- **Index（指数）**：代表市场指数，包含指数代码、指数名称、当前点位、基点、成分股列表、权重分布。关键关系：由多只股票按权重组成，有历史点位数据。

- **IndexConstituent（指数成分股）**：表示某只股票在某个指数中的关系，包含股票代码、指数代码、权重、排名、纳入日期。关键关系：连接股票和指数的多对多关系。

- **PriceData（价格数据）**：代表某个时间点的价格快照，包含时间戳、开盘价、收盘价、最高价、最低价、成交量、成交额、涨跌额、涨跌幅。关键关系：属于某只股票或某个指数，按时间序列组织。

- **MarketState（市场状态）**：代表全局市场状况，包含状态类型（牛市/熊市/横盘）、状态开始时间、预期持续时长、市场整体趋势（日均涨跌幅）。关键关系：影响所有股票和指数的价格生成。

- **StockMetadata（股票元数据）**：代表股票的静态属性，包含市值等级、Beta系数、所属板块、上市日期、流通股本、是否活跃等。关键关系：一对一关联到股票，用于价格生成和指数计算。

## Success Criteria *(mandatory)*

### Measurable Outcomes

- **SC-001**: 用户打开股票列表页面后，能在3秒内看到至少100只股票的实时数据（代码、名称、价格、涨跌幅）
- **SC-002**: 用户打开指数看板后，能同时看到3个核心指数（HAPPY300/50/GROW100）的当前点位和涨跌幅，加载时间不超过2秒
- **SC-003**: 当HAPPY300指数上涨1%时，用户观察到至少70%的个股呈现上涨趋势，体现市场联动性
- **SC-004**: 用户在不刷新页面的情况下，等待1分钟后能看到至少部分股票价格发生变化，证明数据自动更新
- **SC-005**: 用户查看任意股票的K线图时，能看到至少90天的完整历史数据，每天数据完整（开盘、收盘、最高、最低）
- **SC-006**: 用户通过搜索功能，输入股票代码或名称后，能在1秒内找到对应的股票
- **SC-007**: 用户查看板块热力图时，能一眼区分当日表现最好和最差的板块（通过颜色深浅），响应时间不超过2秒
- **SC-008**: 用户点击某只权重股（如平安保险）进入详情页后，能看到其在HAPPY300中的权重（如8.5%）和Beta系数（如0.75）
- **SC-009**: 系统能够连续7天稳定运行，每天生成1440条价格数据（每分钟一条），数据生成成功率达到99%以上
- **SC-010**: 用户在查看不同时间段的K线图时（日K、周K、月K切换），图表能在1秒内完成重新渲染
- **SC-011**: 当用户查看高Beta股票（如Beta=1.50的新能源股）时，观察到其价格波动幅度明显大于低Beta股票（如Beta=0.70的银行股）
- **SC-012**: 指数点位计算准确性达到100%，即手动计算的指数值与系统计算值误差小于0.01点
- **SC-013**: 用户通过板块分类浏览时，每个板块至少包含5只股票，且板块内股票价格走势呈现一定相关性（70%时间同涨同跌）
- **SC-014**: 页面在显示100只股票数据时，内存占用不超过200MB，CPU占用率不超过30%，确保性能流畅

## Assumptions

1. **数据生成频率**：假设每分钟生成一次新价格数据是合理的模拟频率，既不会过于频繁导致系统负担过重，也不会过于缓慢影响用户体验。
2. **历史数据范围**：假设90天（约3个月）的历史数据足够用户进行技术分析学习和回测策略，同时数据量适中便于存储和查询。
3. **市场联动比例**：假设当大盘变化时，70-80%的个股跟随是合理的联动比例，这符合真实市场的统计规律（并非100%联动）。
4. **涨跌停限制**：假设采用A股的±10%涨跌停规则，既模拟真实市场规则，又防止价格生成算法出现极端异常值。
5. **指数权重上限**：假设单只股票权重上限10%、前5大合计40%是合理的权重分散要求，避免个别股票过度影响指数。
6. **板块数量**：假设10个板块足以覆盖主要行业，过多板块会导致每个板块股票过少，过少则分类不够细致。
7. **Beta系数范围**：假设Beta从0.65（公用事业）到1.80（高科技）的范围合理，涵盖了从防御性到激进型的各类股票。
8. **实时性要求**：假设虚拟市场不需要真正的毫秒级实时性，分钟级更新足够满足教育学习场景，且大幅降低系统复杂度。
9. **用户并发量**：假设初期用户量在1000人以内，系统按此规模设计，后续可根据实际情况扩展。
10. **数据保留期**：假设保留所有历史数据（从系统上线起），不自动清理旧数据，便于用户随时查看完整历史记录。
11. **市场状态周期**：假设牛市、熊市、横盘每个状态至少持续7天，这样用户能感受到不同市场环境，但变化不会过于频繁。
12. **成分股调整**：假设指数成分股每季度调整一次（每3个月），这符合真实指数的调整频率，且不会过于频繁导致指数不稳定。

## Dependencies

- **无外部系统依赖**：该虚拟市场是完全自包含的系统，不依赖外部真实市场数据接口或第三方服务。
- **数据库系统**：依赖数据库来存储股票元数据、价格历史数据、指数数据等，但具体数据库类型（MySQL/PostgreSQL）在规格层面不指定。
- **定时任务调度**：依赖某种定时任务机制来每分钟触发价格生成和指数计算，但具体实现方式（cron/调度器）在规格层面不指定。
- **前端框架**：依赖前端技术栈来渲染股票列表、K线图、指数看板等界面，但具体框架选择在规格层面不指定。

## Risks

1. **价格生成算法复杂度**：三层联动机制（市场→板块→个股）可能导致算法过于复杂，难以调试和维证联动效果的真实性。*缓解措施*：分阶段实现，先实现简单的独立波动，再逐步加入市场和板块影响，每个阶段充分测试。

2. **指数计算性能**：每分钟需要计算13个指数（3个核心指数+10个行业指数），每个指数涉及多只股票的权重计算，可能成为性能瓶颈。*缓解措施*：优化计算算法，缓存不变的权重数据，只在成分股价格变化时重新计算。

3. **历史数据生成时间**：为100+只股票生成90天×1440分钟的历史数据（约1300万条记录），初始化时间可能很长。*缓解措施*：使用批量插入优化数据库写入速度，或采用异步后台生成，允许系统先启动后逐步补全历史数据。

4. **前端数据刷新压力**：如果100只股票每分钟都刷新，前端频繁重新渲染可能导致页面卡顿。*缓解措施*：采用增量更新而非全量刷新，只更新价格变化的股票，使用虚拟滚动技术优化长列表渲染。

5. **市场状态切换的合理性**：自动切换牛市/熊市/横盘可能导致市场走势不符合经济逻辑（如无明显原因突然转熊）。*缓解措施*：设计合理的状态转换概率模型，或允许管理员手动干预市场状态，模拟重大事件影响。

6. **用户期望管理**：用户可能期望虚拟市场完全等同于真实市场，对数据真实性有过高期望。*缓解措施*：在产品中明确标注"模拟数据"、"仅供学习"，避免用户将模拟结果直接用于真实投资决策。

7. **数据存储增长**：持续运行后，价格数据会不断累积，可能导致数据库容量问题。*缓解措施*：监控数据库增长速度，设计合理的数据归档策略（如将1年前的分钟数据聚合为日数据）。

8. **Beta系数和联动效果验证困难**：很难证明系统生成的价格确实符合预设的Beta系数和联动规则。*缓解措施*：开发专门的数据分析工具，定期统计股票与大盘的相关系数、实际Beta与理论Beta的偏差，持续调优算法。

## Out of Scope

以下功能明确不包含在此次实现中：

1. **用户交易功能**：本次仅实现市场数据展示，不包括模拟交易、下单、持仓管理等交易功能（这些属于后续的"模拟交易系统"功能）
2. **社交功能**：不包括用户关注、发帖、评论、点赞等社交互动功能
3. **AI推荐和分析**：不包括AI选股推荐、智能投顾、风险评估等AI功能
4. **技术指标计算**：K线图中不包括MACD、KDJ、RSI等技术指标的计算和显示（仅显示原始K线）
5. **资讯和公告**：不包括股票公告、新闻资讯、财报数据等信息展示
6. **分红派息**：不模拟股票分红、送股、配股等公司行为
7. **停牌和退市**：不模拟股票停牌、复牌、退市等特殊状态
8. **北向资金和融资融券**：不模拟北向资金流向、融资融券余额等高级市场数据
9. **IPO和新股**：不模拟新股上市、打新等功能
10. **用户账户系统**：本次实现不需要用户登录和账户管理，所有数据对所有访问者开放
11. **移动端适配**：本次主要针对桌面端Web浏览器，移动端响应式适配不作为优先级
12. **数据导出功能**：不提供将股票数据或K线数据导出为CSV/Excel的功能
13. **自定义选股器**：不提供按条件筛选股票的高级选股工具（如"市值>1000亿且Beta<1.0"）
14. **实时告警**：不提供价格突破提醒、涨停提醒等实时通知功能

## Notes

- **教育优先原则**：整个虚拟市场的设计目的是教育而非完全模拟真实市场，因此在算法复杂度和真实度之间应优先保证用户可理解性。例如，Beta系数应该在界面上有清晰的解释，而不是让用户自己去理解复杂的金融概念。

- **可扩展性考虑**：虽然初期实现106只股票，但系统设计应考虑未来扩展到300只甚至更多股票的可能性。数据结构和算法应具有良好的可扩展性，不应有硬编码的股票数量限制。

- **真实感与简化的平衡**：在某些细节上（如涨跌停、市值加权）应严格模拟真实市场规则以增强真实感；但在另一些地方（如交易时间、集合竞价）可以简化处理以降低复杂度。关键是让用户感受到"这像真实市场"，而不是"这就是真实市场"。

- **文档和帮助的重要性**：由于系统引入了Beta、市值加权、板块轮动等专业概念，必须在界面上提供充分的帮助文档和tooltips，否则普通用户可能无法理解这些数据的含义。

- **测试数据的可复现性**：在开发和测试阶段，应提供确定性的随机种子或测试模式，使得价格生成结果可复现，便于调试和验证算法正确性。生产环境则使用真正的随机数。

- **与《A股虚拟市场完整设计方案》的关系**：本规格说明基于该设计文档，但更侧重于用户视角和业务需求，而非技术实现细节。设计文档中的技术方案（如Python类结构、SQL表结构）属于实现层面，不在本规格范围内。
